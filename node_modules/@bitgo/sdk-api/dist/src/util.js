"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAddressP2PKH = exports.makeRandomKey = exports.getNetwork = void 0;
const utxolib = require("@bitgo/utxo-lib");
const sdk_core_1 = require("@bitgo/sdk-core");
function getNetwork(network) {
    network = network || sdk_core_1.common.getNetwork();
    return utxolib.networks[network];
}
exports.getNetwork = getNetwork;
function makeRandomKey() {
    return utxolib.ECPair.makeRandom({ network: getNetwork() });
}
exports.makeRandomKey = makeRandomKey;
function getAddressP2PKH(key) {
    let pubkey;
    if ('getPublicKeyBuffer' in key) {
        pubkey = key.getPublicKeyBuffer();
    }
    else {
        pubkey = key.publicKey;
    }
    const { address } = utxolib.payments.p2pkh({ pubkey, network: key.network });
    if (!address) {
        throw new Error('could not compute address');
    }
    return address;
}
exports.getAddressP2PKH = getAddressP2PKH;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUEyQztBQUMzQyw4Q0FBb0Q7QUFFcEQsU0FBZ0IsVUFBVSxDQUFDLE9BQW1CO0lBQzVDLE9BQU8sR0FBRyxPQUFPLElBQUksaUJBQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUN6QyxPQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUhELGdDQUdDO0FBRUQsU0FBZ0IsYUFBYTtJQUMzQixPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBOEIsRUFBRSxDQUFDLENBQUM7QUFDMUYsQ0FBQztBQUZELHNDQUVDO0FBT0QsU0FBZ0IsZUFBZSxDQUFDLEdBQWtEO0lBQ2hGLElBQUksTUFBTSxDQUFDO0lBQ1gsSUFBSSxvQkFBb0IsSUFBSSxHQUFHLEVBQUU7UUFDL0IsTUFBTSxHQUFHLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0tBQ25DO1NBQU07UUFDTCxNQUFNLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQztLQUN4QjtJQUNELE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQW1DLEVBQUUsQ0FBQyxDQUFDO0lBQ3pHLElBQUksQ0FBQyxPQUFPLEVBQUU7UUFDWixNQUFNLElBQUksS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7S0FDOUM7SUFDRCxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDO0FBWkQsMENBWUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB1dHhvbGliIGZyb20gJ0BiaXRnby91dHhvLWxpYic7XG5pbXBvcnQgeyBjb21tb24sIFYxTmV0d29yayB9IGZyb20gJ0BiaXRnby9zZGstY29yZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrKG5ldHdvcms/OiBWMU5ldHdvcmspOiB1dHhvbGliLk5ldHdvcmsge1xuICBuZXR3b3JrID0gbmV0d29yayB8fCBjb21tb24uZ2V0TmV0d29yaygpO1xuICByZXR1cm4gdXR4b2xpYi5uZXR3b3Jrc1tuZXR3b3JrXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSYW5kb21LZXkoKTogdXR4b2xpYi5FQ1BhaXIuRUNQYWlySW50ZXJmYWNlIHtcbiAgcmV0dXJuIHV0eG9saWIuRUNQYWlyLm1ha2VSYW5kb20oeyBuZXR3b3JrOiBnZXROZXR3b3JrKCkgYXMgdXR4b2xpYi5CaXRjb2luSlNOZXR3b3JrIH0pO1xufVxuXG5pbnRlcmZhY2UgTGVnYWN5RUNQYWlyIHtcbiAgbmV0d29yazogdXR4b2xpYi5OZXR3b3JrO1xuICBnZXRQdWJsaWNLZXlCdWZmZXIoKTogQnVmZmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRkcmVzc1AyUEtIKGtleTogdXR4b2xpYi5FQ1BhaXIuRUNQYWlySW50ZXJmYWNlIHwgTGVnYWN5RUNQYWlyKTogc3RyaW5nIHtcbiAgbGV0IHB1YmtleTtcbiAgaWYgKCdnZXRQdWJsaWNLZXlCdWZmZXInIGluIGtleSkge1xuICAgIHB1YmtleSA9IGtleS5nZXRQdWJsaWNLZXlCdWZmZXIoKTtcbiAgfSBlbHNlIHtcbiAgICBwdWJrZXkgPSBrZXkucHVibGljS2V5O1xuICB9XG4gIGNvbnN0IHsgYWRkcmVzcyB9ID0gdXR4b2xpYi5wYXltZW50cy5wMnBraCh7IHB1YmtleSwgbmV0d29yazoga2V5Lm5ldHdvcmsgYXMgdXR4b2xpYi5CaXRjb2luSlNOZXR3b3JrIH0pO1xuICBpZiAoIWFkZHJlc3MpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjb21wdXRlIGFkZHJlc3MnKTtcbiAgfVxuICByZXR1cm4gYWRkcmVzcztcbn1cbiJdfQ==
"use strict";
/**
 * @hidden
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAddressP2PKH = exports.makeRandomKey = exports.getNetwork = void 0;
const sdk_core_1 = require("@bitgo/sdk-core");
const utxolib = require("@bitgo/utxo-lib");
function getNetwork(network) {
    network = network || sdk_core_1.common.getNetwork();
    return utxolib.networks[network];
}
exports.getNetwork = getNetwork;
function makeRandomKey() {
    return utxolib.ECPair.makeRandom({ network: getNetwork() });
}
exports.makeRandomKey = makeRandomKey;
function getAddressP2PKH(key) {
    let pubkey;
    if ('getPublicKeyBuffer' in key) {
        pubkey = key.getPublicKeyBuffer();
    }
    else {
        pubkey = key.publicKey;
    }
    const { address } = utxolib.payments.p2pkh({ pubkey, network: key.network });
    if (!address) {
        throw new Error('could not compute address');
    }
    return address;
}
exports.getAddressP2PKH = getAddressP2PKH;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYml0Y29pbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iaXRjb2luLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7O0FBR0gsOENBQW9EO0FBQ3BELDJDQUEyQztBQUUzQyxTQUFnQixVQUFVLENBQUMsT0FBbUI7SUFDNUMsT0FBTyxHQUFHLE9BQU8sSUFBSSxpQkFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3pDLE9BQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNuQyxDQUFDO0FBSEQsZ0NBR0M7QUFFRCxTQUFnQixhQUFhO0lBQzNCLE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUE4QixFQUFFLENBQUMsQ0FBQztBQUMxRixDQUFDO0FBRkQsc0NBRUM7QUFPRCxTQUFnQixlQUFlLENBQUMsR0FBeUU7SUFDdkcsSUFBSSxNQUFNLENBQUM7SUFDWCxJQUFJLG9CQUFvQixJQUFJLEdBQUcsRUFBRTtRQUMvQixNQUFNLEdBQUcsR0FBRyxDQUFDLGtCQUFrQixFQUFFLENBQUM7S0FDbkM7U0FBTTtRQUNMLE1BQU0sR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDO0tBQ3hCO0lBQ0QsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsT0FBbUMsRUFBRSxDQUFDLENBQUM7SUFDekcsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNaLE1BQU0sSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztLQUM5QztJQUNELE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFaRCwwQ0FZQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGhpZGRlblxuICovXG5cbmltcG9ydCAqIGFzIGJpcDMyIGZyb20gJ2JpcDMyJztcbmltcG9ydCB7IGNvbW1vbiwgVjFOZXR3b3JrIH0gZnJvbSAnQGJpdGdvL3Nkay1jb3JlJztcbmltcG9ydCAqIGFzIHV0eG9saWIgZnJvbSAnQGJpdGdvL3V0eG8tbGliJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ldHdvcmsobmV0d29yaz86IFYxTmV0d29yayk6IHV0eG9saWIuTmV0d29yayB7XG4gIG5ldHdvcmsgPSBuZXR3b3JrIHx8IGNvbW1vbi5nZXROZXR3b3JrKCk7XG4gIHJldHVybiB1dHhvbGliLm5ldHdvcmtzW25ldHdvcmtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJhbmRvbUtleSgpOiB1dHhvbGliLkVDUGFpci5FQ1BhaXJJbnRlcmZhY2Uge1xuICByZXR1cm4gdXR4b2xpYi5FQ1BhaXIubWFrZVJhbmRvbSh7IG5ldHdvcms6IGdldE5ldHdvcmsoKSBhcyB1dHhvbGliLkJpdGNvaW5KU05ldHdvcmsgfSk7XG59XG5cbmludGVyZmFjZSBMZWdhY3lFQ1BhaXIge1xuICBuZXR3b3JrOiB1dHhvbGliLk5ldHdvcms7XG4gIGdldFB1YmxpY0tleUJ1ZmZlcigpOiBCdWZmZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZGRyZXNzUDJQS0goa2V5OiB1dHhvbGliLkVDUGFpci5FQ1BhaXJJbnRlcmZhY2UgfCBiaXAzMi5CSVAzMkludGVyZmFjZSB8IExlZ2FjeUVDUGFpcik6IHN0cmluZyB7XG4gIGxldCBwdWJrZXk7XG4gIGlmICgnZ2V0UHVibGljS2V5QnVmZmVyJyBpbiBrZXkpIHtcbiAgICBwdWJrZXkgPSBrZXkuZ2V0UHVibGljS2V5QnVmZmVyKCk7XG4gIH0gZWxzZSB7XG4gICAgcHVia2V5ID0ga2V5LnB1YmxpY0tleTtcbiAgfVxuICBjb25zdCB7IGFkZHJlc3MgfSA9IHV0eG9saWIucGF5bWVudHMucDJwa2goeyBwdWJrZXksIG5ldHdvcms6IGtleS5uZXR3b3JrIGFzIHV0eG9saWIuQml0Y29pbkpTTmV0d29yayB9KTtcbiAgaWYgKCFhZGRyZXNzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgY29tcHV0ZSBhZGRyZXNzJyk7XG4gIH1cbiAgcmV0dXJuIGFkZHJlc3M7XG59XG4iXX0=